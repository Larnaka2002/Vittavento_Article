<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–í—ã–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
</head>
<body>

  <div class="container">
    <h1>–í—ã–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–µ—Ä–∞—Ä—Ö–∏–π 2 –∏ 3</h1>

    <form method="POST">
      <table id="componentsTable" class="display components-table" style="width: 100%;">
        <thead>
          <tr>
            <th>‚úì</th>
            <th>–ê—Ä—Ç–∏–∫—É–ª</th>
            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            <th>–í–µ—Å</th>
          </tr>
        </thead>
        <tbody>
          {% for article in articles %}
          <tr>
            <td><input type="checkbox" name="component_ids" value="{{ article.id }}"></td>
            <td>{{ article.code }}</td>
            <td>{{ article.description }}</td>
            <td>{{ article.weight_real }} –∫–≥</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="button-container">
        <button type="submit" class="start-button">–í—ã–±—Ä–∞—Ç—å</button>
        <a href="{{ url_for('main.index') }}" class="back-button">‚Üê –ù–∞–∑–∞–¥</a>
      </div>
    </form>
  </div>

  <script>
    $(document).ready(function () {
      $('#componentsTable thead tr').clone(true).appendTo('#componentsTable thead');
      $('#componentsTable thead tr:eq(1) th').each(function (i) {
        if (i > 0 && i < 4) {
          $(this).html('<input type="text" placeholder="–§–∏–ª—å—Ç—Ä..." style="width: 100%; padding: 3px;" />');
          $('input', this).on('keyup change', function () {
            if (table.column(i).search() !== this.value) {
              table.column(i).search(this.value).draw();
            }
          });
        } else {
          $(this).html('');
        }
      });

      const table = $('#componentsTable').DataTable({
        orderCellsTop: true,
        fixedHeader: true,
        paging: false,
        info: false,
        language: {
          search: "üîç –ü–æ–∏—Å–∫:",
          zeroRecords: "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ",
          emptyTable: "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"
        }
      });
    });
  </script>

</body>
</html>
